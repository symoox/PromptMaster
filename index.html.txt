<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptMaster - Générateur de Prompts AI</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel pour comprendre le JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icônes SVG intégrées (Pour éviter les dépendances externes) ---
        const Icon = ({ path, className, size = 24 }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const Icons = {
            Brain: (props) => <Icon {...props} path={<><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></>} />,
            RefreshCw: (props) => <Icon {...props} path={<><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 21H3v-5"/></>} />,
            Code: (props) => <Icon {...props} path={<><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></>} />,
            Zap: (props) => <Icon {...props} path={<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>} />,
            PenTool: (props) => <Icon {...props} path={<><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></>} />,
            BarChart: (props) => <Icon {...props} path={<><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></>} />,
            MessageSquare: (props) => <Icon {...props} path={<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>} />,
            Rocket: (props) => <Icon {...props} path={<><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"/><path d="M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"/></>} />,
            Sparkles: (props) => <Icon {...props} path={<><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M2 7h4"/><path d="M2 3h4"/></>} />,
            Copy: (props) => <Icon {...props} path={<><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
        };

        // --- Composant Principal App ---
        const App = () => {
            const [role, setRole] = useState('');
            const [task, setTask] = useState('');
            const [context, setContext] = useState('');
            const [format, setFormat] = useState('');
            const [finalPrompt, setFinalPrompt] = useState('');
            const [copied, setCopied] = useState(false);
            const [activeTab, setActiveTab] = useState('custom');

            useEffect(() => {
                if (!role && !task && !context && !format) {
                    setFinalPrompt("");
                    return;
                }
                
                let promptBuilder = "";
                if (role) promptBuilder += `Agis en tant que ${role}.\n`;
                if (task) promptBuilder += `Ta tâche principale est de : ${task}.\n`;
                if (context) promptBuilder += `\nContexte et contraintes :\n${context}\n`;
                if (format) promptBuilder += `\nFormat de réponse attendu : ${format}`;

                setFinalPrompt(promptBuilder);
            }, [role, task, context, format]);

            const handleCopy = () => {
                navigator.clipboard.writeText(finalPrompt);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const fillTemplate = (type) => {
                setActiveTab(type);
                setCopied(false);
                
                switch (type) {
                    case 'code':
                        setRole("Ingénieur logiciel Senior expert en React et Python");
                        setTask("Écrire une fonction propre et optimisée pour trier une liste d'objets par date");
                        setContext("- Utilise les standards ES6+\n- Ajoute des commentaires explicatifs\n- Gère les cas d'erreurs (dates invalides)");
                        setFormat("Bloc de code Markdown avec une brève explication avant le code.");
                        break;
                    case 'marketing':
                        setRole("Directeur Marketing digital spécialisé en réseaux sociaux");
                        setTask("Créer un calendrier éditorial pour une marque de café bio sur Instagram");
                        setContext("- Ton : Énergique et éco-responsable\n- Cible : Jeunes professionnels urbains\n- Durée : 1 semaine (7 posts)");
                        setFormat("Tableau avec les colonnes : Jour, Idée du Post, Légende suggérée, Hashtags.");
                        break;
                    case 'writing':
                        setRole("Éditeur en chef d'un magazine technologique");
                        setTask("Réécrire ce paragraphe pour le rendre plus percutant et concis");
                        setContext("- Évite le jargon inutile\n- Utilise la voix active\n- Garde un ton professionnel mais accessible");
                        setFormat("Texte brut suivi d'une liste des changements majeurs effectués.");
                        break;
                    case 'analysis':
                        setRole("Analyste de données expert");
                        setTask("Analyser les tendances à partir des données textuelles fournies ci-dessous");
                        setContext("- Identifie les 3 thèmes principaux\n- Suggère des actions concrètes pour chaque thème");
                        setFormat("Liste à puces structurée avec des titres en gras.");
                        break;
                    default: 
                        setRole("");
                        setTask("");
                        setContext("");
                        setFormat("");
                        break;
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-12">
                
                {/* --- Header --- */}
                <div className="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-6 shadow-lg">
                    <div className="max-w-5xl mx-auto flex flex-col md:flex-row items-center justify-between">
                    <div className="flex items-center gap-3 mb-4 md:mb-0">
                        <div className="bg-white/20 p-2 rounded-full backdrop-blur-sm">
                        <Icons.Brain size={32} className="text-yellow-300" />
                        </div>
                        <div>
                        <h1 className="text-3xl font-bold tracking-tight">Prompt<span className="text-yellow-300">Master</span></h1>
                        <p className="text-indigo-100 text-sm">Créez des prompts parfaits pour ChatGPT, Claude & Gemini</p>
                        </div>
                    </div>
                    <button 
                        onClick={() => fillTemplate('custom')}
                        className="flex items-center gap-2 bg-white/10 hover:bg-white/20 transition px-4 py-2 rounded-lg border border-white/30 text-sm font-medium"
                    >
                        <Icons.RefreshCw size={16} />
                        Nouveau Prompt
                    </button>
                    </div>
                </div>

                <div className="max-w-5xl mx-auto px-4 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
                    
                    {/* --- Colonne de Gauche : Le Constructeur --- */}
                    <div className="lg:col-span-7 space-y-6">
                    
                    {/* Sélection rapide de templates */}
                    <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
                        <h2 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">
                        Choisir un modèle de départ
                        </h2>
                        <div className="flex flex-wrap gap-2">
                        <TemplateBtn icon={<Icons.Code size={16} />} label="Code" color="blue" active={activeTab === 'code'} onClick={() => fillTemplate('code')} />
                        <TemplateBtn icon={<Icons.Zap size={16} />} label="Marketing" color="orange" active={activeTab === 'marketing'} onClick={() => fillTemplate('marketing')} />
                        <TemplateBtn icon={<Icons.PenTool size={16} />} label="Rédaction" color="pink" active={activeTab === 'writing'} onClick={() => fillTemplate('writing')} />
                        <TemplateBtn icon={<Icons.BarChart size={16} />} label="Analyse" color="emerald" active={activeTab === 'analysis'} onClick={() => fillTemplate('analysis')} />
                        </div>
                    </div>

                    {/* Formulaire Inputs */}
                    <div className="bg-white rounded-xl shadow-lg border-t-4 border-indigo-500 overflow-hidden">
                        <div className="p-6 space-y-6">
                        
                        {/* Rôle */}
                        <div className="group">
                            <label className="flex items-center gap-2 text-indigo-700 font-semibold mb-2">
                            <span className="bg-indigo-100 p-1.5 rounded-md"><Icons.MessageSquare size={18} /></span>
                            Rôle (Persona)
                            </label>
                            <input
                            type="text"
                            value={role}
                            onChange={(e) => setRole(e.target.value)}
                            placeholder="Ex: Expert en nutrition sportive, Professeur de mathématiques..."
                            className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 outline-none transition-all placeholder:text-slate-400"
                            />
                            <p className="text-xs text-slate-500 mt-1 ml-1">Qui l'IA doit-elle imiter ?</p>
                        </div>

                        {/* Tâche */}
                        <div>
                            <label className="flex items-center gap-2 text-pink-600 font-semibold mb-2">
                            <span className="bg-pink-100 p-1.5 rounded-md"><Icons.Rocket size={18} /></span>
                            Tâche (Action)
                            </label>
                            <textarea
                            value={task}
                            onChange={(e) => setTask(e.target.value)}
                            placeholder="Ex: Créer un plan de repas de 7 jours, Expliquer le théorème de Pythagore..."
                            rows={2}
                            className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-pink-400 focus:border-pink-400 outline-none transition-all placeholder:text-slate-400 resize-none"
                            />
                            <p className="text-xs text-slate-500 mt-1 ml-1">Que doit faire l'IA exactement ? Utilise des verbes d'action.</p>
                        </div>

                        {/* Contexte */}
                        <div>
                            <label className="flex items-center gap-2 text-emerald-600 font-semibold mb-2">
                            <span className="bg-emerald-100 p-1.5 rounded-md"><Icons.Sparkles size={18} /></span>
                            Contexte & Contraintes
                            </label>
                            <textarea
                            value={context}
                            onChange={(e) => setContext(e.target.value)}
                            placeholder="Ex: - Moins de 200 mots&#10;- Ton humoristique&#10;- Pour un public débutant"
                            rows={4}
                            className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 outline-none transition-all placeholder:text-slate-400"
                            />
                            <p className="text-xs text-slate-500 mt-1 ml-1">Détails cruciaux, ton, audience cible, ce qu'il faut éviter.</p>
                        </div>

                        {/* Format */}
                        <div>
                            <label className="flex items-center gap-2 text-orange-600 font-semibold mb-2">
                            <span className="bg-orange-100 p-1.5 rounded-md"><Icons.Code size={18} /></span>
                            Format de Sortie
                            </label>
                            <input
                            type="text"
                            value={format}
                            onChange={(e) => setFormat(e.target.value)}
                            placeholder="Ex: Tableau HTML, Liste JSON, Paragraphe court, Code Python..."
                            className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-orange-400 outline-none transition-all placeholder:text-slate-400"
                            />
                        </div>

                        </div>
                    </div>
                    </div>

                    {/* --- Colonne de Droite : Résultat --- */}
                    <div className="lg:col-span-5 flex flex-col h-full">
                    <div className="sticky top-6">
                        <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span className="w-2 h-8 bg-purple-600 rounded-full"></span>
                        Ton Prompt Généré
                        </h2>
                        
                        <div className="relative group">
                        <div className="absolute -inset-0.5 bg-gradient-to-r from-pink-600 to-purple-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-1000"></div>
                        <div className="relative bg-white rounded-xl shadow-xl border border-slate-100 flex flex-col min-h-[400px]">
                            
                            <div className="flex-grow p-6">
                            {finalPrompt ? (
                                <pre className="whitespace-pre-wrap font-sans text-slate-700 text-lg leading-relaxed">
                                {finalPrompt}
                                </pre>
                            ) : (
                                <div className="h-full flex flex-col items-center justify-center text-slate-400 space-y-4 opacity-60">
                                <Icons.Brain size={48} className="text-slate-300" />
                                <p className="text-center">Remplis les champs à gauche pour voir la magie opérer...</p>
                                </div>
                            )}
                            </div>

                            <div className="p-4 bg-slate-50 border-t border-slate-100 rounded-b-xl flex justify-between items-center">
                            <div className="text-xs font-medium text-slate-400">
                                {finalPrompt.length} caractères
                            </div>
                            <button
                                onClick={handleCopy}
                                disabled={!finalPrompt}
                                className={`
                                flex items-center gap-2 px-6 py-3 rounded-lg font-bold shadow-md transition-all transform active:scale-95
                                ${!finalPrompt 
                                    ? 'bg-slate-200 text-slate-400 cursor-not-allowed' 
                                    : copied 
                                    ? 'bg-green-500 text-white shadow-green-200' 
                                    : 'bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:shadow-indigo-200 hover:-translate-y-1'
                                }
                                `}
                            >
                                {copied ? (
                                <>
                                    <Icons.CheckCircle size={20} />
                                    Copié !
                                </>
                                ) : (
                                <>
                                    <Icons.Copy size={20} />
                                    Copier le Prompt
                                </>
                                )}
                            </button>
                            </div>
                        </div>
                        </div>

                        <div className="mt-8 bg-blue-50 border border-blue-100 rounded-xl p-5">
                        <h3 className="font-bold text-blue-800 mb-2 flex items-center gap-2">
                            <Icons.Zap size={18} className="fill-blue-800" />
                            Astuce de pro
                        </h3>
                        <p className="text-sm text-blue-700 leading-relaxed">
                            Plus ton <strong>Contexte</strong> est précis, meilleur sera le résultat. N'hésite pas à donner un exemple de ce que tu attends à l'IA ("Few-shot prompting") pour augmenter la qualité drastiquement.
                        </p>
                        </div>

                    </div>
                    </div>

                </div>
                </div>
            );
        };

        const TemplateBtn = ({ icon, label, color, active, onClick }) => {
            const colorClasses = {
                blue: active ? 'bg-blue-100 text-blue-700 border-blue-300 ring-2 ring-blue-400' : 'text-slate-600 hover:bg-blue-50 hover:text-blue-600',
                orange: active ? 'bg-orange-100 text-orange-700 border-orange-300 ring-2 ring-orange-400' : 'text-slate-600 hover:bg-orange-50 hover:text-orange-600',
                pink: active ? 'bg-pink-100 text-pink-700 border-pink-300 ring-2 ring-pink-400' : 'text-slate-600 hover:bg-pink-50 hover:text-pink-600',
                emerald: active ? 'bg-emerald-100 text-emerald-700 border-emerald-300 ring-2 ring-emerald-400' : 'text-slate-600 hover:bg-emerald-50 hover:text-emerald-600',
            };

            return (
                <button
                onClick={onClick}
                className={`
                    flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 transition-all font-medium text-sm
                    ${colorClasses[color] || 'bg-white'}
                `}
                >
                {icon}
                {label}
                </button>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>